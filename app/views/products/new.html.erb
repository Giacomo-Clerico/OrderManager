<h1 class="text-xl font-bold mb-4">New Product</h1>

<%= form_with(model: @product, local: true, class: "space-y-4") do |f| %>
    <% if @product.errors.any? %>
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
        <h2 class="font-semibold">
            <%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:
        </h2>
        <ul class="list-disc ml-6">
            <% @product.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
            <% end %>
        </ul>
        </div>
    <% end %>

    <div>
        <%= f.label :code, class: "block font-medium" %>
        <%= f.text_field :code, class: "w-full border rounded px-3 py-2" %>
    </div>

    <div>
        <%= f.label :desctription, "Description", class: "block font-medium" %>
        <%= f.rich_text_area :desctription, class: "w-full border rounded px-3 py-2" %>
    </div>

    <div>
        <%= f.label :category, class: "block font-medium" %>
        <%= f.select :category, options_for_select(@categories), {}, class: "border rounded px-3 py-2" %>
    </div>

    <div>
        <%= f.label :product_type, class: "block font-medium" %>
        <%= f.text_field :product_type, class: "w-full border rounded px-3 py-2" %>
    </div>

    <br>
    <h2 class="text-lg font-semibold mb-2">Initial Stock Information (optional)</h2>

    <%# Define reusable class strings %>
    <% label_class = "block text-sm font-medium text-gray-700 mb-1" %>
    <% input_class = "block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" %>
    <% number_input_class = "w-full rounded-lg border-gray-300 shadow-sm px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" %>

    <div>
    <%= f.label :initial_storage_id, "Storage", class: label_class %>
    <%= f.collection_select :initial_storage_id, Storage.all, :id, :abbreviation,
            { prompt: "Select a storage" },
            { class: input_class } %>
    <%= f.hidden_field :initial_storage_type, value: "Storage" %>
    </div>

    <div>
    <%= f.label :initial_location, class: label_class %>
    <%= f.text_field :initial_location, class: input_class %>
    </div>

    <div>
    <%= f.label :initial_stock_quantity, "Initial Stock Quantity", class: label_class %>
    <%= number_field_tag :initial_stock_quantity, nil, min: 0, class: number_input_class %>
    </div>

    <div class="flex space-x-4">
        <%= f.submit "Create Product", class: "px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600" %>
        <%= link_to "Cancel", products_path, class: "px-4 py-2 bg-gray-300 rounded hover:bg-gray-400" %>
    </div>


<% end %>
